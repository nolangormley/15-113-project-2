version: '3.8'

services:
  # # Chore Chart Website (Flask App)
  # chore_chart:
  #   build:
  #     context: ./chore_chart
  #     dockerfile: Dockerfile
  #   ports:
  #     - "5000:5000"
  #   volumes:
  #     - ./chore_chart:/app
  #   environment:
  #     - FLASK_ENV=development
  #   networks:
  #     - app_network

  # # Strava Recommended Workout API (FastAPI)
  # strava_api:
  #   build:
  #     context: ./strava-recommended-workout
  #     dockerfile: src/api/Dockerfile
  #   ports:
  #     - "5001:8000"
  #   volumes:
  #     - ./strava-recommended-workout:/app
  #   env_file:
  #     - .env
  #   environment:
  #     # Map DB path if needed, or rely on .env
  #     - DB_PATH=/app/data/strava_warehouse.duckdb
  #   networks:
  #     - app_network

  # Calendar Google Sync API (FastAPI)
  calendar_api:
    build:
      context: ./calendar_api
      dockerfile: Dockerfile
    ports:
      - "5005:5005"
    volumes:
      - ./calendar_api:/app
    env_file:
      - .env
    networks:
      - app_network

  # Dashboard UI (Next.js App)
  dashboard:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "80:3000"
    networks:
      - app_network

networks:
  app_network:
    driver: bridge
